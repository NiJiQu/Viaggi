<section class="h-100 h-custom background">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-8 col-xl-6">
        <div class="card rounded-3">

          <div class="card-body p-4 p-md-5" >
            <h2 class="mb-4 pb-2 pb-md-0 mb-md-5 px-md-2 titolo">Nuovo Viaggio</h2>

            <form class="px-md-2" [formGroup]="form" (ngSubmit)="OnSubmit()" style="margin-left: 28px;">

              <div class="form-outline mb-4">
                  <label class="form-label" for="form3Example1q">Titolo: </label>
                <input type="text" id="form3Example1q" class="form-control" name="titolo" formControlName="titolo"/>
                <p class="help is-danger" *ngIf="form.get('titolo').touched && form.controls.titolo.hasError('required')">Il campo è Obbligatorio</p>
              </div>

              <div class="form-outline mb-4">
                <label class="form-label" for="form3Example1q">Intestazione: </label>
                <input type="text" id="form3Example1q" class="form-control" name="intestazione" formControlName="intestazione"/>
                <p class="help is-danger" *ngIf="form.get('intestazione').touched && form.controls.intestazione.hasError('required')">Il campo è Obbligatorio</p>
              </div>

              <div class="form-outline mb-4">
                <label class="form-label" for="form3Example1q">Descrizione: </label>
                <ckeditor [editor]="Editor" [config]="editorConfig" type="text" id="form3Example1q" class="form-control descrizioneViaggio" formControlName="descrizione"/>
                <p class="help is-danger" *ngIf="form.get('descrizione').touched && form.controls.descrizione.hasError('required')">Il campo è Obbligatorio</p>
              </div>

              <div class="form-outline mb-4">
                <label class="form-label" for="form3Example1q">Immagine: </label>
                <input type="text" id="form3Example1q" class="form-control" name="immagine" formControlName="immagine"/>
                <p class="help is-danger" *ngIf="form.get('immagine').touched && form.controls.immagine.hasError('required')">Il campo è Obbligatorio</p>
              </div>

              <div class="d-flex">
                <div>
                  <label class="form-label" for="form3Example1q">Data di partenza: </label>
                  <p-calendar dateFormat="dd.mm.yy" formControlName="partenza"></p-calendar>
                  <p class="help is-danger" *ngIf="form.get('partenza').touched && form.controls.partenza.hasError('required')">Il campo è Obbligatorio</p>
                </div>
                <div>
                  <label class="form-label" for="form3Example1q">Data di ritorno: </label>
                  <p-calendar dateFormat="dd.mm.yy" formControlName="ritorno"></p-calendar>
                  <p class="help is-danger" *ngIf="form.get('ritorno').touched && form.controls.ritorno.hasError('required')">Il campo è Obbligatorio</p>
                </div>
              </div>

              <div class="d-flex" style="margin: 20px 0px;">
                <div>
                  <label class="form-label" for="form3Example1q">Posti: </label>
                  <input type="text" id="form3Example1q" class="form-control fine-form" name="posti" formControlName="posti"/>
                  <p class="help is-danger" *ngIf="form.get('posti').touched && form.controls.posti.hasError('required')">Il campo è Obbligatorio</p>
                </div>
                <div style="margin-left: 45px;">
                  <label class="form-label" for="form3Example1q">Prezzo: </label>
                  <input type="text" id="form3Example1q" class="form-control fine-form" name="prezzo" formControlName="prezzo"/>
                  <p class="help is-danger" *ngIf="form.get('prezzo').touched && form.controls.prezzo.hasError('required')">Il campo è Obbligatorio</p>
                </div>
              </div>

              <button type="submit" class="btn btn-success btn-lg mb-1 bottone" [disabled]="!form.valid" (click)="open(modaleViaggio)">Aggiungi</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<ng-template #modaleViaggio let-modal>
  <div class="modal-header">
    <h3>Viaggio Aggiunto</h3>
    <button type="button" class="btn-close" aria-label="close" (click)="modal.dismiss()"></button>
  </div>

  <div class="modal-body">
    <h3><b>Titolo:</b> {{form.value.titolo}}</h3>
    <p><b>Intestazione:</b> {{form.value.intestazione}}</p>
    <p><b>Descrizione:</b> <span [innerHTML]="form.value.descrizione"></span></p>
    <p><b>Data di partenza:</b> {{form.value.partenza | date}}</p>
    <p><b>Data di ritorno:</b> {{form.value.ritorno | date}}</p>
    <p><b>Posti disponibili:</b> {{form.value.posti}}</p>
    <p><b>Prezzo:</b> €{{form.value.prezzo}}</p>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn" (click)="modal.dismiss()">chiudi</button>
    <button type="button" class="btn btn-success" (click)="modal.close()" ngbAutoFocus>Aggiungi</button>
  </div>
</ng-template>
